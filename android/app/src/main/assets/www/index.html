<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src * self blob: data: gap:; style-src * self 'unsafe-inline' blob: data: gap:; script-src * 'self' 'unsafe-eval' 'unsafe-inline' blob: data: gap:; object-src * 'self' blob: data: gap:; img-src * self 'unsafe-inline' blob: data: gap:; connect-src self * 'unsafe-inline' blob: data: gap:; frame-src * self blob: data: gap:;">
    <script src="https://checkout.reepay.com/checkout.js"></script>
</head>
<body>

<!--
<div style="width: 100%; height: 600px; border: green 1px solid">
    <iframe id="rp_iframe" src="https://checkout.reepay.com/#/cs_8c855ce8a9005bce32dfa7ee141c1de4" style="width: 100%; height: 100%; border: none;"></iframe>
</div>
-->

<div id="rp_container" style="min-width: 300px; width: 100%; height: 730px; margin: auto;"></div>

<script>
     window.onload = function() {

      console.log(document.getElementById("rp_container"));

      var rp = new Reepay.WindowCheckout("cs_7180e4923d40781151f08fb779e142e8", { html_element: "rp_container" });
      console.log(rp.location);
      console.log(rp.is_loaded);
      var iframeId = rp.iframe_id;
      console.log(iframeId)
      console.log(document.getElementById("rp_container").querySelector("#" + iframeId));
        console.log(document.getElementById("rp_container").querySelector("#" + rp.iframe_id).allow);

      // document.body.appendChild(document.getElementById("rp_container").querySelector("#" + iframeId));

      // const node = document.getElementById("test")
      // const clone = node.cloneNode(true);
      // document.body.appendChild(clone)

      rp.addEventHandler(Reepay.Event.Accept, function(data){
        console.log(data);
        console.log('success');
      });

      rp.addEventHandler(Reepay.Event.Error, function(data) {
        console.log(data);
        console.log('error');
      });

      rp.addEventHandler(Reepay.Event.Close, function() {
        console.log('close');
      });

    };
  </script>

</body>
</html>